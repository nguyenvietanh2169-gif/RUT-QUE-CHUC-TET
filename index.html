<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·∫Øc Qu·∫ª Linh ·ª®ng - Xu√¢n B√≠nh Ng·ªç 2026</title>
    <style>
        :root { 
            --gold: #ffd700; 
            --red: #d40000; 
            --paper: #fffdf0; 
        }

        body {
            margin: 0; 
            /* H√¨nh n·ªÅn b·∫°n cung c·∫•p */
            background: url('https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/IMG_6492.JPG?raw=true') no-repeat center center fixed;
            background-size: cover;
            height: 100vh; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            overflow: hidden;
            font-family: 'Segoe UI', Arial, sans-serif;
        }

        /* L·ªõp ph·ªß t·ªëi nh·∫π ƒë·ªÉ n·ªïi b·∫≠t ·ªëng qu·∫ª */
        body::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 0;
        }

        h1 {
            position: relative;
            z-index: 1;
            color: var(--gold);
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8);
            margin-top: 0;
            font-size: 2rem;
            text-align: center;
        }

        /* 1. C·∫•u tr√∫c ·ªëng qu·∫ª TO v√† TRUNG T√ÇM */
        #container {
            position: relative; 
            z-index: 2;
            width: 250px; /* TƒÉng k√≠ch th∆∞·ªõc ·ªëng qu·∫ª */
            height: 400px;
            perspective: 1000px; 
            cursor: pointer;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        .cup-layer { 
            position: absolute; 
            width: 100%; 
            bottom: 0;
            user-select: none;
            pointer-events: none;
        }

        #cup-back { z-index: 1; filter: brightness(0.5); transform: scale(0.96); }
        
        #sticks {  
            z-index: 2; 
            bottom: 100px; /* ƒêi·ªÅu ch·ªânh v·ªã tr√≠ qu·∫ª trong ·ªëng */
            width: 55%; 
            transition: transform 0.1s; 
        }

        #cup-front { 
            z-index: 3; 
            filter: drop-shadow(0 15px 30px rgba(0,0,0,0.7));
        }

        /* 2. C√¢y qu·∫ª ch√≠nh bay ra */
        #single-stick {
            position: fixed; 
            width: 60px; 
            z-index: 100; 
            display: none;
            left: 50%; 
            top: 50%; 
            transform: translate(-50%, -50%);
            filter: drop-shadow(0 5px 20px rgba(0,0,0,0.6));
        }

        /* 3. 4 Qu·∫ª ph·ª• trang tr√≠ xung quanh */
        .decor-stick {
            position: absolute;
            width: 40px;
            opacity: 0.6;
            z-index: 1;
            filter: blur(1px);
        }

        /* Animation l·∫Øc */
        .shaking #cup-front, .shaking #cup-back { animation: shake-cup 0.1s infinite alternate; }
        .shaking #sticks { animation: shake-sticks 0.08s infinite alternate; }

        @keyframes shake-cup {
            0% { transform: rotate(4deg); }
            100% { transform: rotate(-4deg); }
        }

        @keyframes shake-sticks {
            0% { transform: translateY(0); }
            100% { transform: translateY(-50px) rotate(5deg); }
        }

        /* 4. B·∫£ng k·∫øt qu·∫£ */
        #ket-qua {
            display: none; 
            position: fixed; 
            top: 50%; 
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            background: var(--paper); 
            color: #800000; 
            padding: 30px;
            border-radius: 15px; 
            border: 5px double #b30000;
            z-index: 200; 
            width: 300px; 
            text-align: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.9);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #ket-qua.show { display: block; transform: translate(-50%, -50%) scale(1); }

        .btn {
            background: var(--red); 
            color: var(--gold);
            border: 2px solid var(--gold); 
            padding: 12px 30px; 
            border-radius: 30px;
            font-weight: bold; 
            cursor: pointer; 
            margin-top: 20px;
            font-size: 1rem;
            position: relative;
            z-index: 5;
        }

        .instruction {
            position: relative;
            z-index: 1;
            color: white;
            margin-top: 20px;
            background: rgba(0,0,0,0.5);
            padding: 5px 15px;
            border-radius: 20px;
        }
    </style>
</head>
<body>

    <h1>üßß XIN QU·∫∫ LINH ·ª®NG 2026 üßß</h1>

    <img class="decor-stick" style="top:10%; left:10%; transform:rotate(-15deg)" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">
    <img class="decor-stick" style="top:15%; right:10%; transform:rotate(20deg)" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">
    <img class="decor-stick" style="bottom:10%; left:15%; transform:rotate(10deg)" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">
    <img class="decor-stick" style="bottom:20%; right:15%; transform:rotate(-25deg)" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">

    <div id="container">
        <img id="cup-back" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/ong%20que.png?raw=true">
        <img id="sticks" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">
        <img id="cup-front" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/ong%20que.png?raw=true">
    </div>

    <img id="single-stick" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">

    <div class="instruction">Ch·∫°m ·ªëng qu·∫ª ho·∫∑c l·∫Øc m√°y ƒë·ªÉ xin l·ªôc</div>
    <button id="start-btn" class="btn">KHAI XU√ÇN ƒê√ìN L·ªòC</button>

    <div id="ket-qua">
        <h2 style="margin-top:0; border-bottom: 2px solid var(--red); padding-bottom: 10px;">‚ú® L·ªúI QU·∫∫ ‚ú®</h2>
        <div id="loi-chuc" style="font-size: 1.3rem; min-height: 80px; padding: 15px 0; line-height: 1.5;"></div>
        <button class="btn" onclick="reset()">T·∫† L·ªÑ & XIN L·∫†I</button>
    </div>

    <audio id="sfx" src="https://www.soundjay.com/misc/sounds/wooden-clatter-1.mp3"></audio>

    <script>
        const loiChucs = [
            "üßß Ti·ªÅn v√¥ nh∆∞ n∆∞·ªõc s√¥ng ƒê√†\nTi·ªÅn ra nh·ªè gi·ªçt nh∆∞ c√† ph√™ phin",
            "üå∏ V·∫°n s·ª± nh∆∞ √Ω\nƒê·∫Øc l·ªôc to√†n gia",
            "üí∞ S·ª©c kh·ªèe v√¥ bi√™n\nKi·∫øm ƒë∆∞·ª£c nhi·ªÅu ti·ªÅn",
            "‚ú® T√¨nh duy√™n ph∆°i ph·ªõi\nH·∫°nh ph√∫c ng·∫≠p tr·ªùi",
            "üêé M√£ ƒë√°o th√†nh c√¥ng\nV·∫°n s·ª± hanh th√¥ng",
            "üçÄ C·∫ßu ƒë∆∞·ª£c ∆∞·ªõc th·∫•y\nQu√Ω nh√¢n ph√π tr·ª£"
        ];

        let isShaking = false;
        const container = document.getElementById('container');
        const singleStick = document.getElementById('single-stick');
        const ketQua = document.getElementById('ket-qua');
        const sfx = document.getElementById('sfx');

        function startShake() {
            if (isShaking) return;
            isShaking = true;
            sfx.currentTime = 0;
            sfx.play();
            container.classList.add('shaking');

            setTimeout(() => {
                container.classList.remove('shaking');
                launchStick();
            }, 1200);
        }

        function launchStick() {
            singleStick.style.display = 'block';
            const anim = singleStick.animate([
                { transform: 'translate(-50%, 100%) scale(0.3) rotate(0deg)', opacity: 0 },
                { transform: 'translate(-50%, -50%) scale(1.5) rotate(1080deg)', opacity: 1 }
            ], { 
                duration: 1200, 
                easing: 'cubic-bezier(0.17, 0.67, 0.83, 0.67)',
                fill: 'forwards'
            });

            anim.onfinish = () => {
                setTimeout(() => {
                    singleStick.style.display = 'none';
                    showFinalResult();
                }, 1000);
            };
        }

        function showFinalResult() {
            document.getElementById('loi-chuc').innerText = loiChucs[Math.floor(Math.random()*loiChucs.length)];
            ketQua.classList.add('show');
        }

        function reset() {
            ketQua.classList.remove('show');
            setTimeout(() => { isShaking = false; }, 500);
        }

        container.onclick = startShake;

        document.getElementById('start-btn').onclick = (e) => {
            e.target.style.display = 'none';
            if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission().then(res => { if(res==='granted') initAcc(); });
            } else { initAcc(); }
        };

        function initAcc() {
            let lastA = 0;
            window.addEventListener('devicemotion', (e) => {
                let a = e.accelerationIncludingGravity;
                if(!a) return;
                let total = Math.abs(a.x + a.y + a.z);
                if (Math.abs(total - lastA) > 20) startShake();
                lastA = total;
            });
        }
    </script>
</body>
</html>
