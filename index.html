<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·∫Øc Qu·∫ª Linh ·ª®ng - Xu√¢n B√≠nh Ng·ªç 2026</title>
    <style>
        :root { 
            --gold: #ffd700; 
            --red: #b30000; 
            --paper: #fffdf0; 
        }

        body {
            margin: 0; 
            background: radial-gradient(circle, #b30000, #4a0000);
            height: 100vh; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            overflow: hidden;
            font-family: 'Segoe UI', sans-serif; 
            color: var(--gold);
        }

        h1 {
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            margin-bottom: 20px;
            text-align: center;
        }

        /* 1. C·∫•u tr√∫c ·ªëng qu·∫ª 3D Layering */
        #container {
            position: relative; 
            width: 180px; 
            height: 320px;
            perspective: 1000px; 
            cursor: pointer;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        .cup-layer { 
            position: absolute; 
            width: 100%; 
            bottom: 0;
            user-select: none;
            -webkit-user-drag: none;
        }

        /* L·ªõp ·ªëng ph√≠a sau */
        #cup-back { 
            z-index: 1; 
            filter: brightness(0.6); 
            transform: scale(0.95);
        }

        /* B√≥ qu·∫ª n·∫±m gi·ªØa */
        #sticks {  
            z-index: 2; 
            bottom: 60px; /* ƒêi·ªÅu ch·ªânh ƒë·ªÉ qu·∫ª l√≥ ra kh·ªèi mi·ªáng ·ªëng */
            width: 50%; 
            transition: transform 0.1s; 
        }

        /* L·ªõp ·ªëng ph√≠a tr∆∞·ªõc */
        #cup-front { 
            z-index: 3; 
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.6));
        }

        /* 2. C√¢y qu·∫ª ƒë∆°n bay ra */
        #single-stick {
            position: fixed; 
            width: 45px; 
            z-index: 100; 
            display: none;
            left: 50%; 
            top: 50%; 
            transform: translate(-50%, -50%);
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5));
        }

        /* Animations */
        .shaking #cup-front, .shaking #cup-back { animation: shake-cup 0.15s infinite alternate; }
        .shaking #sticks { animation: shake-sticks 0.1s infinite alternate; }

        @keyframes shake-cup {
            0% { transform: rotate(2deg); }
            100% { transform: rotate(-2deg); }
        }

        @keyframes shake-sticks {
            0% { transform: translateY(0); }
            100% { transform: translateY(-30px) rotate(3deg); }
        }

        /* 3. B·∫£ng k·∫øt qu·∫£ */
        #ket-qua {
            display: none; 
            position: fixed; 
            top: 50%; 
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            background: var(--paper); 
            color: #b30000; 
            padding: 30px;
            border-radius: 10px; 
            border: 6px double #b30000;
            z-index: 200; 
            width: 280px; 
            text-align: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #ket-qua.show { display: block; transform: translate(-50%, -50%) scale(1); }

        .btn {
            background: var(--gold); 
            color: var(--red);
            border: none; 
            padding: 12px 25px; 
            border-radius: 25px;
            font-weight: bold; 
            cursor: pointer; 
            margin-top: 20px;
            box-shadow: 0 4px 0 #d4af37;
        }

        .btn:active { transform: translateY(2px); box-shadow: none; }

        p { margin-top: 20px; opacity: 0.8; font-size: 0.9rem; }
    </style>
</head>
<body>

    <h1>üßß XIN QU·∫∫ ƒê·∫¶U NƒÇM üßß</h1>

    <div id="container">
        <img id="cup-back" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/ong%20que.png?raw=true">
        <img id="sticks" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">
        <img id="cup-front" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/ong%20que.png?raw=true">
    </div>

    <img id="single-stick" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">

    <p>Ch·∫°m v√†o ·ªëng ho·∫∑c l·∫Øc ƒëi·ªán tho·∫°i ƒë·ªÉ xin qu·∫ª</p>
    <button id="start-btn" class="btn">B·∫§T ƒê·∫¶U XIN QU·∫∫</button>

    <div id="ket-qua">
        <h2 style="margin-top:0">‚ú® K·∫æT QU·∫¢ ‚ú®</h2>
        <div id="loi-chuc" style="font-size: 1.2rem; min-height: 60px; font-weight: 500;"></div>
        <button class="btn" onclick="reset()">T·∫† L·ªÑ & XIN L·∫†I</button>
    </div>

    <audio id="sfx" src="https://www.soundjay.com/misc/sounds/wooden-clatter-1.mp3"></audio>

    <script>
        const loiChucs = [
            "üßß Ti·ªÅn v√¥ nh∆∞ n∆∞·ªõc s√¥ng ƒê√†\nTi·ªÅn ra nh·ªè gi·ªçt nh∆∞ c√† ph√™ phin",
            "üå∏ V·∫°n s·ª± nh∆∞ √Ω\nƒê·∫Øc l·ªôc to√†n gia",
            "üí∞ S·ª©c kh·ªèe v√¥ bi√™n\nKi·∫øm ƒë∆∞·ª£c nhi·ªÅu ti·ªÅn",
            "‚ú® T√¨nh duy√™n ph∆°i ph·ªõi\nH·∫°nh ph√∫c ng·∫≠p tr·ªùi",
            "üêâ C√¥ng danh r·∫°ng r·ª°\nG·∫∑p nhi·ªÅu may m·∫Øn",
            "üéã B√¨nh an v√¥ s·ª±\nH·ª∑ s·ª± l√¢m m√¥n"
        ];

        let isShaking = false;
        const container = document.getElementById('container');
        const singleStick = document.getElementById('single-stick');
        const ketQua = document.getElementById('ket-qua');
        const sfx = document.getElementById('sfx');

        function startShake() {
            if (isShaking) return;
            isShaking = true;
            
            // Ch·∫°y √¢m thanh
            sfx.currentTime = 0;
            sfx.play();
            
            container.classList.add('shaking');

            setTimeout(() => {
                container.classList.remove('shaking');
                launchStick();
            }, 1500);
        }

        function launchStick() {
            singleStick.style.display = 'block';
            
            // Hi·ªáu ·ª©ng c√¢y qu·∫ª ƒë∆°n bay t·ª´ ·ªëng l√™n gi·ªØa m√†n h√¨nh
            const anim = singleStick.animate([
                { transform: 'translate(-50%, 50%) scale(0.5) rotate(0deg)', opacity: 0 },
                { transform: 'translate(-50%, -50%) scale(1.2) rotate(720deg)', opacity: 1 }
            ], { 
                duration: 1000, 
                easing: 'ease-out',
                fill: 'forwards'
            });

            anim.onfinish = () => {
                setTimeout(() => {
                    singleStick.style.display = 'none';
                    showFinalResult();
                }, 800);
            };
        }

        function showFinalResult() {
            const randomMsg = loiChucs[Math.floor(Math.random() * loiChucs.length)];
            document.getElementById('loi-chuc').innerText = randomMsg;
            ketQua.classList.add('show');
        }

        function reset() {
            ketQua.classList.remove('show');
            setTimeout(() => { 
                isShaking = false; 
            }, 500);
        }

        // S·ª± ki·ªán click
        container.onclick = startShake;

        // X·ª≠ l√Ω n√∫t b·∫Øt ƒë·∫ßu v√† xin quy·ªÅn c·∫£m bi·∫øn (cho iOS)
        document.getElementById('start-btn').onclick = (e) => {
            e.target.style.display = 'none';
            if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission()
                    .then(response => {
                        if (response == 'granted') initAcc();
                    })
                    .catch(console.error);
            } else {
                initAcc();
            }
        };

        function initAcc() {
            let lastA = 0;
            window.addEventListener('devicemotion', (e) => {
                let a = e.accelerationIncludingGravity;
                if(!a) return;
                let total = Math.abs(a.x + a.y + a.z);
                if (Math.abs(total - lastA) > 18) { // ƒê·ªô nh·∫°y khi l·∫Øc
                    startShake();
                }
                lastA = total;
            });
        }
    </script>
</body>
</html>
