<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gieo Quẻ Bính Ngọ 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --red-silk: #8b0000;
            --gold: #d4af37;
            /* Màu giấy xuyến chỉ có vân nhám */
            --paper-texture: #f4f1ea; 
        }

        body {
            margin: 0;
            background: #1a1a1a url('https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/IMG_6492.JPG?raw=true') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 0;
        }

        /* ỐNG QUẺ VÀ 3 CÂY QUẺ */
        #container {
            position: relative;
            width: 220px;
            height: 400px;
            z-index: 10;
            cursor: pointer;
            display: flex;
            justify-content: center;
        }

        .cup-layer { position: absolute; bottom: 0; width: 100%; pointer-events: none; }
        #cup-back { z-index: 1; filter: brightness(0.4); }
        #cup-front { z-index: 5; filter: drop-shadow(0 15px 30px rgba(0,0,0,0.7)); }

        .stick-group {
            position: absolute;
            bottom: 100px;
            width: 45%;
            transition: transform 0.1s;
        }

        /* Lắc khác nhau cho 3 cây quẻ */
        .shaking .s1 { animation: shake-stick 0.12s infinite alternate; }
        .shaking .s2 { animation: shake-stick 0.08s infinite alternate-reverse; }
        .shaking .s3 { animation: shake-stick 0.1s infinite alternate; animation-delay: 0.05s; }

        @keyframes shake-stick {
            0% { transform: translateY(0) rotate(-2deg); }
            100% { transform: translateY(-40px) rotate(3deg); }
        }

        @keyframes shake-cup {
            0% { transform: rotate(-2deg); }
            100% { transform: rotate(2deg); }
        }
        .shaking-cup { animation: shake-cup 0.1s infinite; }

        /* CÂY QUẺ BAY */
        #flying-stick {
            position: fixed;
            width: 45px;
            z-index: 50;
            display: none;
            left: 50%;
            bottom: 250px;
            transform: translateX(-50%);
        }

        /* CUỘN THƯ PHÁP */
        #scroll-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .scroll-wrapper {
            position: relative;
            width: 40px;
            height: 75vh;
            max-height: 550px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: width 1.2s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .scroll-wrapper.open {
            width: 90vw;
            max-width: 450px;
        }

        /* GIẤY THƯ PHÁP CHÂN THẬT */
        .scroll-content {
            width: 100%;
            height: 90%;
            background-color: var(--paper-texture);
            /* Tạo vân giấy bằng gradient */
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.5) 0%, transparent 100%),
                repeating-linear-gradient(45deg, rgba(0,0,0,0.02) 0px, rgba(0,0,0,0.02) 1px, transparent 1px, transparent 10px);
            border: 1px solid #d2b48c;
            box-shadow: 
                inset 0 0 60px rgba(0,0,0,0.1),
                0 10px 40px rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        /* Viền đỏ sớ tết */
        .scroll-content::after {
            content: "";
            position: absolute;
            top: 15px; left: 15px; right: 15px; bottom: 15px;
            border: 2px solid var(--red-silk);
            outline: 4px double var(--red-silk);
            outline-offset: -12px;
            pointer-events: none;
        }

        .roller {
            position: absolute;
            width: 28px;
            height: 105%;
            background: linear-gradient(to right, #2b1d1a, #5d4037, #2b1d1a);
            border-radius: 5px;
            z-index: 2;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        .roller.left { left: 0; transform: translateX(-50%); }
        .roller.right { right: 0; transform: translateX(50%); }

        .wish-text {
            font-family: 'Dancing Script', cursive;
            color: var(--red-silk);
            font-size: 2.2rem;
            text-align: center;
            white-space: pre-line;
            opacity: 0;
            z-index: 3;
            transition: opacity 1s 1s;
            filter: drop-shadow(1px 1px 0px rgba(0,0,0,0.1));
        }

        .open .wish-text { opacity: 1; }

        .btn-ui {
            position: absolute;
            bottom: 60px;
            padding: 15px 35px;
            background: var(--red-silk);
            color: var(--gold);
            border: 2px solid var(--gold);
            font-weight: bold;
            cursor: pointer;
            z-index: 20;
            border-radius: 5px;
            letter-spacing: 2px;
        }
    </style>
</head>
<body>

    <div id="container" onclick="startGieo()">
        <img id="cup-back" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/ong%20que.png?raw=true">
        
        <img class="stick-group s1" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true" style="left: 20%; transform: rotate(-5deg);">
        <img class="stick-group s2" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true" style="left: 30%; transform: rotate(2deg);">
        <img class="stick-group s3" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true" style="left: 40%; transform: rotate(8deg);">
        
        <img id="cup-front" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/ong%20que.png?raw=true">
    </div>

    <img id="flying-stick" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">

    <div id="scroll-overlay" onclick="closeScroll()">
        <div class="scroll-wrapper" id="scrollWrapper">
            <div class="roller left"></div>
            <div class="scroll-content">
                <div class="wish-text" id="wishDisplay"></div>
            </div>
            <div class="roller right"></div>
        </div>
    </div>

    <button class="btn-ui" id="btnAction">KHỞI TÂM XIN QUẺ</button>

    <audio id="sfx" src="https://www.soundjay.com/misc/sounds/wooden-clatter-1.mp3"></audio>

    <script>
        const wishes = [
            "Mã Đáo Thành Công\nVạn Sự Hanh Thông",
            "Phúc Lộc Đầy Nhà\nTiền Vô Như Nước",
            "Sức Khỏe Dồi Dào\nAn Khang Thịnh Vượng",
            "Công Thành Danh Toại\nSự Nghiệp Thăng Hoa",
            "Tình Duyên Viên Mãn\nHạnh Phúc Bền Lâu",
            "Ngũ Phúc Lâm Môn\nPhú Quý Cát Tường"
        ];

        let active = false;
        const sfx = document.getElementById('sfx');

        function startGieo() {
            if (active) return;
            active = true;
            document.getElementById('btnAction').style.display = 'none';

            sfx.play();
            const container = document.getElementById('container');
            container.classList.add('shaking', 'shaking-cup');

            setTimeout(() => {
                container.classList.remove('shaking', 'shaking-cup');
                launchStick();
            }, 1500);
        }

        function launchStick() {
            const fs = document.getElementById('flying-stick');
            fs.style.display = 'block';
            
            const anim = fs.animate([
                { bottom: '250px', transform: 'translateX(-50%) scale(1) rotate(0deg)', opacity: 1 },
                { bottom: '50%', transform: 'translateX(-50%) translateY(50%) scale(2.5) rotate(1080deg)', opacity: 0 }
            ], {
                duration: 1200,
                easing: 'ease-in-out'
            });

            anim.onfinish = () => {
                fs.style.display = 'none';
                openScroll();
            };
        }

        function openScroll() {
            const random = wishes[Math.floor(Math.random() * wishes.length)];
            document.getElementById('wishDisplay').innerText = random + "\nBính Ngọ 2026";
            
            document.getElementById('scroll-overlay').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('scrollWrapper').classList.add('open');
            }, 100);
        }

        function closeScroll() {
            document.getElementById('scrollWrapper').classList.remove('open');
            setTimeout(() => {
                document.getElementById('scroll-overlay').style.display = 'none';
                document.getElementById('btnAction').style.display = 'block';
                active = false;
            }, 800);
        }

        document.getElementById('btnAction').onclick = (e) => {
            e.stopPropagation();
            startGieo();
        };
    </script>
</body>
</html>
