<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gieo Quẻ Bính Ngọ 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --silk: #5d4037; /* Màu lụa bồi */
            --paper: #eaddca; /* Màu giấy xuyến cũ */
            --ink: #1a1a1a; /* Màu mực tàu */
            --gold: #d4af37;
            --red-ancient: #7a0000;
        }

        body {
            margin: 0;
            background: #111 url('https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/IMG_6492.JPG?raw=true') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Segoe UI', serif;
        }

        body::before {
            content: "";
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.75);
            z-index: 0;
        }

        /* ỐNG QUẺ GIỮA MÀN HÌNH */
        #container {
            position: relative;
            width: 280px;
            height: 480px;
            z-index: 10;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin-top: -50px; /* Nhích lên trên chút để cân đối */
        }

        .cup-layer { position: absolute; bottom: 0; width: 100%; pointer-events: none; }
        #cup-back { z-index: 1; filter: brightness(0.4) sepia(0.5); }
        #cup-front { z-index: 5; filter: drop-shadow(0 20px 50px rgba(0,0,0,0.9)); }

        /* CÂY QUẺ NẰM TRONG ỐNG */
        .stick-group {
            position: absolute;
            bottom: 110px; /* Nhú lên một chút khỏi miệng ống */
            width: 14%;
            z-index: 3;
            filter: brightness(0.7) contrast(1.1);
            transition: transform 0.1s;
        }

        .shaking .s1 { animation: shake-s 0.12s infinite alternate; }
        .shaking .s2 { animation: shake-s 0.08s infinite alternate-reverse; }
        .shaking .s3 { animation: shake-s 0.1s infinite alternate; animation-delay: 0.03s; }

        @keyframes shake-s {
            0% { transform: translateY(0) rotate(-3deg); }
            100% { transform: translateY(-70px) rotate(4deg); } /* Nảy lên cao khỏi miệng */
        }

        .shaking-cup { animation: shake-c 0.1s infinite; }
        @keyframes shake-c {
            from { transform: rotate(-3deg) translateX(-2px); }
            to { transform: rotate(3deg) translateX(2px); }
        }

        /* QUẺ BAY */
        #flying-stick {
            position: fixed;
            width: 35px;
            z-index: 50;
            display: none;
            left: 50%;
            top: 40%;
            transform: translateX(-50%);
        }

        /* CUỘN THƯ PHÁP CAO CẤP */
        #scroll-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92);
            display: none;
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .scroll-wrapper {
            position: relative;
            width: 40px;
            height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: width 1.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .scroll-wrapper.open {
            width: 90vw;
            max-width: 480px;
        }

        .scroll-content {
            width: 100%;
            height: 95%;
            background: var(--paper);
            /* Vân giấy xuyến chỉ & vết ố cổ */
            background-image: 
                url('https://www.transparenttextures.com/patterns/handmade-paper.png'),
                radial-gradient(circle at center, transparent 30%, rgba(93, 64, 55, 0.1) 100%),
                linear-gradient(to bottom, transparent 90%, rgba(0,0,0,0.05) 100%);
            border: 12px solid var(--silk); /* Bồi lụa */
            box-shadow: 0 0 60px rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .scroll-content::after {
            content: "";
            position: absolute;
            top: 10px; left: 10px; right: 10px; bottom: 10px;
            border: 1px solid var(--red-ancient);
            outline: 3px double var(--red-ancient);
            outline-offset: -12px;
            opacity: 0.6;
        }

        .roller {
            position: absolute;
            width: 32px;
            height: 105%;
            background: linear-gradient(to right, #1a0f0d, #4e342e, #1a0f0d);
            border-radius: 4px;
            z-index: 10;
            box-shadow: 0 0 25px rgba(0,0,0,0.7);
        }
        .roller.left { left: -10px; transform: translateX(-50%); }
        .roller.right { right: -10px; transform: translateX(50%); }

        .wish-text {
            font-family: 'Dancing Script', cursive;
            color: var(--ink);
            font-size: 2rem;
            text-align: center;
            white-space: pre-line;
            opacity: 0;
            z-index: 5;
            transition: opacity 1s 1s;
            filter: drop-shadow(1px 1px 0px rgba(255,255,255,0.4));
        }

        .open .wish-text { opacity: 1; }

        .btn-ui {
            position: relative;
            z-index: 20;
            margin-top: 30px;
            padding: 14px 40px;
            background: var(--red-ancient);
            color: var(--gold);
            border: 2px solid var(--gold);
            font-weight: bold;
            cursor: pointer;
            letter-spacing: 2px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        }
    </style>
</head>
<body>

    <div id="container" onclick="startGieo()">
        <img id="cup-back" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/ong%20que.png?raw=true">
        
        <img class="stick-group s1" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true" style="left: 36%;">
        <img class="stick-group s2" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true" style="left: 43%;">
        <img class="stick-group s3" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true" style="left: 50%;">
        
        <img id="cup-front" class="cup-layer" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/ong%20que.png?raw=true">
    </div>

    <img id="flying-stick" src="https://github.com/nguyenvietanh2169-gif/RUT-QUE-CHUC-TET/blob/main/que.png?raw=true">

    <button class="btn-ui" id="btnAction">KHAI TÂM XIN QUẺ</button>

    <div id="scroll-overlay" onclick="closeScroll()">
        <div class="scroll-wrapper" id="scrollWrapper">
            <div class="roller left"></div>
            <div class="scroll-content">
                <div class="wish-text" id="wishDisplay"></div>
            </div>
            <div class="roller right"></div>
        </div>
    </div>

    <audio id="sfx" src="https://www.soundjay.com/misc/sounds/wooden-clatter-1.mp3"></audio>

    <script>
        const wishes = [
            "Mã Đáo Thành Công\nVạn Sự Hanh Thông",
            "Thiên Ý Cát Tường\nPhú Quý Bình An",
            "Ngũ Phúc Lâm Môn\nĐắc Lộc Toàn Gia",
            "Công Thành Danh Toại\nSự Nghiệp Thăng Hoa",
            "An Khang Thịnh Vượng\nSức Khỏe Dồi Dào",
            "Vạn Kỳ Như Ý\nTấn Tài Tấn Lộc",
            "Thân Tâm An Lạc\nTrí Tuệ Minh Mẫn",
            "Gia Hòa Vạn Sự Hưng\nHạnh Phúc Bền Lâu",
            "Khai Xuân Đại Cát\nVạn Sự Hanh Thông",
            "Phong Thủy Hữu Tình\nTài Lộc Vô Biên",
            "Nhất Phẩm Đương Triều\nDanh Tiếng Vang Xa",
            "Kim Ngọc Mãn Đường\nPhúc Thọ Song Toàn",
            "Bách Nghiệp Hưng Thịnh\nThuận Buồm Xuôi Gió",
            "Thời Lai Vận Đáo\nHóa Rồng Bay Cao",
            "Cung Hỷ Phát Tài\nVạn Sự Như Ý",
            "Xuân Phong Đắc Ý\nHỷ Khí Đầy Nhà",
            "Đức Tài Song Lập\nPhúc Trạch Vĩnh Miên",
            "Tình Duyên Viên Mãn\nSong Hỷ Lâm Môn",
            "Học Vấn Tinh Thông\nBảng Vàng Đề Tên",
            "Tiền Trình Tự Cẩm\nRạng Rỡ Tổ Tông"
        ];

        let active = false;
        const sfx = document.getElementById('sfx');

        function startGieo() {
            if (active) return;
            active = true;
            document.getElementById('btnAction').style.visibility = 'hidden';

            sfx.play().catch(()=>{});
            const container = document.getElementById('container');
            container.classList.add('shaking', 'shaking-cup');

            setTimeout(() => {
                container.classList.remove('shaking', 'shaking-cup');
                launchStick();
            }, 1500);
        }

        function launchStick() {
            const fs = document.getElementById('flying-stick');
            fs.style.display = 'block';
            
            const anim = fs.animate([
                { top: '50%', transform: 'translateX(-50%) scale(1) rotate(0deg)', opacity: 1 },
                { top: '30%', transform: 'translateX(-50%) translateY(-100px) scale(3) rotate(720deg)', opacity: 0 }
            ], {
                duration: 1200,
                easing: 'ease-in-out'
            });

            anim.onfinish = () => {
                fs.style.display = 'none';
                openScroll();
            };
        }

        function openScroll() {
            const random = wishes[Math.floor(Math.random() * wishes.length)];
            document.getElementById('wishDisplay').innerText = random + "\nBính Ngọ 2026";
            
            document.getElementById('scroll-overlay').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('scrollWrapper').classList.add('open');
            }, 100);
        }

        function closeScroll() {
            document.getElementById('scrollWrapper').classList.remove('open');
            setTimeout(() => {
                document.getElementById('scroll-overlay').style.display = 'none';
                document.getElementById('btnAction').style.visibility = 'visible';
                active = false;
            }, 1000);
        }

        document.getElementById('btnAction').onclick = startGieo;
    </script>
</body>
</html>
